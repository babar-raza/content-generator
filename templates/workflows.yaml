version: 1

# Authoritative capability dependencies (DAG)
dependencies:
  ingest_kb: []
  identify_blog_topics: ["kb_article_loaded"]
  check_duplication: ["topics_identified"]
  gather_rag_kb: ["topic_approved"]
  gather_rag_blog: ["topic_approved"]
  create_outline: ["gather_rag_kb", "gather_rag_blog"]
  write_introduction: ["create_outline"]
  write_sections: ["create_outline", "write_introduction"]
  write_conclusion: ["write_sections"]
  generate_supplementary: ["write_sections"]
  assemble_content: ["write_conclusion", "generate_supplementary"]
  inject_api_links: ["assemble_content", "gather_rag_api"]
  gather_rag_api: ["topic_approved"]
  generate_code: ["gather_rag_api"]
  extract_code: ["assemble_content"]
  inject_license: ["generate_code"]
  validate_code: ["inject_license"]
  split_code: ["validate_code"]
  generate_seo: ["assemble_content"]
  extract_keywords: ["assemble_content"]
  inject_keywords: ["generate_seo", "extract_keywords"]
  create_gist_readme: ["split_code"]
  upload_gist: ["create_gist_readme"]
  validate_links: ["upload_gist"]
  add_frontmatter: ["inject_keywords"]
  write_file: ["add_frontmatter"]

profiles:
  fast-draft:
    # Deterministic, quick path â€” prose first
    deterministic: true
    warnings_as_errors: true
    max_retries: 2
    llm: { temperature: 0.0, top_p: 1.0 }
    order:
      - ingest_kb
      - identify_blog_topics
      - check_duplication
      - gather_rag_kb
      - gather_rag_blog
      - create_outline
      - write_introduction
      - write_sections
      - write_conclusion
      - generate_supplementary
      - assemble_content
      - inject_api_links
      - generate_seo
      - extract_keywords
      - inject_keywords
      - add_frontmatter
      - write_file
    skip:
      - gather_rag_api
      - generate_code
      - extract_code
      - inject_license
      - validate_code
      - split_code
      - create_gist_readme
      - upload_gist
      - validate_links
    disabled_agents:
      - ModelSelectionAgent
    agent_overrides: {}

  full:
    # Everything on; softer constraints
    deterministic: false
    warnings_as_errors: false
    max_retries: 5
    llm: { temperature: 0.2, top_p: 1.0 }
    order:
      - ingest_kb
      - identify_blog_topics
      - check_duplication
      - gather_rag_kb
      - gather_rag_blog
      - create_outline
      - write_introduction
      - write_sections
      - write_conclusion
      - generate_supplementary
      - assemble_content
      - inject_api_links
      - gather_rag_api
      - generate_code
      - inject_license
      - validate_code
      - split_code
      - create_gist_readme
      - upload_gist
      - validate_links
      - generate_seo
      - extract_keywords
      - inject_keywords
      - add_frontmatter
      - extract_code
      - write_file
    disabled_agents: []
    agent_overrides: {}